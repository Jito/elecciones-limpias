/* ========================================================
 * easyWizard v1
 * http://st3ph.github.com/jquery.easyWizard
 * ========================================================
 * Copyright 2012 St√©phane Litou
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 * ======================================================== */(function(e){var t=new Array,n={init:function(r){var i=e.extend({stepClassName:"step",showSteps:!0,stepsText:"{n}. {t}",showButtons:!0,buttonsClass:"",prevButton:"< Back",nextButton:"Next >",debug:!1,submitButton:!0,submitButtonText:"Submit",submitButtonClass:"",before:function(e,t,n){},after:function(e,t,n){},beforeSubmit:function(t){t.find("input, textarea").each(function(){if(!this.checkValidity()){this.focus();step=e(this).parents("."+thisSettings.stepClassName).attr("data-step");n.goToStep.call(t,step);return!1}})}},r);t[this.index()]=i;return this.each(function(){thisSettings=i;$this=e(this);$this.addClass("easyWizardElement");$steps=$this.find("."+thisSettings.stepClassName);thisSettings.steps=$steps.length;thisSettings.width=e(this).width();if(thisSettings.steps>1){$this.wrapInner('<div class="easyWizardWrapper" />');$this.find(".easyWizardWrapper").width(thisSettings.width*thisSettings.steps);$this.css({position:"relative",overflow:"hidden"}).addClass("easyPager");$stepsHtml=e('<ul class="easyWizardSteps">');$steps.each(function(t){step=t+1;e(this).css({"float":"left",width:thisSettings.width,height:"1px"}).attr("data-step",step);t||e(this).addClass("active").css("height","");stepText=thisSettings.stepsText.replace("{n}","<span>"+step+"</span>");stepText=stepText.replace("{t}",e(this).attr("data-step-title"));$stepsHtml.append("<li"+(t?"":' class="current"')+' data-step="'+step+'">'+stepText+"</li>")});thisSettings.showSteps&&$this.prepend($stepsHtml);if(thisSettings.showButtons){paginationHtml='<div class="easyWizardButtons">';paginationHtml+='<button class="prev '+thisSettings.buttonsClass+'">'+thisSettings.prevButton+"</button>";paginationHtml+='<button class="next '+thisSettings.buttonsClass+'">'+thisSettings.nextButton+"</button>";paginationHtml+=thisSettings.submitButton?'<button type="submit" class="submit '+thisSettings.submitButtonClass+'">'+thisSettings.submitButtonText+"</button>":"";paginationHtml+="</div>";$paginationBloc=e(paginationHtml);$paginationBloc.css("clear","both");$paginationBloc.find(".prev, .submit").hide();$paginationBloc.find(".prev").bind("click.easyWizard",function(t){t.preventDefault();$wizard=e(this).parents(".easyWizardElement");n.prevStep.apply($wizard)});$paginationBloc.find(".next").bind("click.easyWizard",function(t){t.preventDefault();$wizard=e(this).parents(".easyWizardElement");n.nextStep.apply($wizard)});$this.append($paginationBloc)}$formObj=$this.is("form")?$this:e(this).find("form");$this.find('[type="submit"]').bind("click.easyWizard",function(t){$wizard=e(this).parents(".easyWizardElement");thisSettings.beforeSubmit($wizard);return!0})}else thisSettings.debug&&console.log("Can't make a wizard with only one step oO")})},prevStep:function(){thisSettings=t[this.index()];$activeStep=this.find(".active");if($activeStep.prev("."+thisSettings.stepClassName).length){prevStep=parseInt($activeStep.attr("data-step"))-1;n.goToStep.call(this,prevStep)}},nextStep:function(){thisSettings=t[this.index()];$activeStep=this.find(".active");if($activeStep.next("."+thisSettings.stepClassName).length){nextStep=parseInt($activeStep.attr("data-step"))+1;n.goToStep.call(this,nextStep)}},goToStep:function(e){thisSettings=t[this.index()];$activeStep=this.find(".active");$nextStep=this.find("."+thisSettings.stepClassName+'[data-step="'+e+'"]');currentStep=$activeStep.attr("data-step");thisSettings.before(this,$activeStep,$nextStep);currentStep<e?leftValue=thisSettings.width*-1:leftValue=thisSettings.width;$activeStep.removeClass("active");$nextStep.css("height","").addClass("active");this.find(".easyWizardWrapper").animate({"margin-left":thisSettings.width*(e-1)*-1});this.find(".easyWizardSteps .current").removeClass("current");this.find('.easyWizardSteps li[data-step="'+e+'"]').addClass("current");$paginationBloc=this.find(".easyWizardButtons");if($paginationBloc.length)if(e==1){$paginationBloc.find(".prev, .submit").hide();$paginationBloc.find(".next").show()}else if(e<thisSettings.steps){$paginationBloc.find(".submit").hide();$paginationBloc.find(".prev, .next").show()}else{$paginationBloc.find(".next").hide();$paginationBloc.find(".submit").show()}thisSettings.after(this,$activeStep,$nextStep)}};e.fn.easyWizard=function(t){if(n[t])return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.easyWizard")}})(jQuery);